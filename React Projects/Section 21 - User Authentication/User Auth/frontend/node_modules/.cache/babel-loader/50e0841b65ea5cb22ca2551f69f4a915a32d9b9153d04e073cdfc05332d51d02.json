{"ast":null,"code":"import { redirect } from \"react-router-dom\";\nexport function getAuthToken() {\n  const token = sessionStorage.getItem(\"token\");\n  if (!token) {\n    return null;\n  }\n  const tokenDuration = getTokenDuration();\n  if (tokenDuration === null) {\n    return \"EXPIRED\";\n  }\n  return token;\n}\nexport function tokenLoader() {\n  const token = getAuthToken();\n  return {\n    token\n  };\n}\nexport function checkAuthLoader() {\n  const token = getAuthToken();\n  if (!token || token === \"EXPIRED\") {\n    return redirect(\"/auth\");\n  } else {\n    return null;\n  }\n}\nexport function getTokenDuration() {\n  const storedExpirationDate = sessionStorage.getItem(\"expiration\");\n  const expirationDate = new Date(storedExpirationDate);\n  const currentTime = new Date();\n  if (currentTime >= expirationDate) {\n    return null;\n  } else {\n    return expirationDate.getTime() - currentTime.getTime();\n  }\n}","map":{"version":3,"names":["redirect","getAuthToken","token","sessionStorage","getItem","tokenDuration","getTokenDuration","tokenLoader","checkAuthLoader","storedExpirationDate","expirationDate","Date","currentTime","getTime"],"sources":["/Users/jared/Documents/dev/Jareds-React-Projects/React Projects/Section 21 - User Authentication/User Auth/frontend/src/utl/auth.js"],"sourcesContent":["import { redirect } from \"react-router-dom\";\n\nexport function getAuthToken() {\n  const token = sessionStorage.getItem(\"token\");\n\n  if (!token) {\n    return null;\n  }\n\n  const tokenDuration = getTokenDuration();\n\n  if (tokenDuration === null) {\n    return \"EXPIRED\";\n  }\n\n  return token;\n}\n\nexport function tokenLoader() {\n  const token = getAuthToken();\n  return { token };\n}\n\nexport function checkAuthLoader() {\n  const token = getAuthToken();\n\n  if (!token || token === \"EXPIRED\") {\n    return redirect(\"/auth\");\n  } else {\n    return null;\n  }\n}\n\nexport function getTokenDuration() {\n  const storedExpirationDate = sessionStorage.getItem(\"expiration\");\n  const expirationDate = new Date(storedExpirationDate);\n  const currentTime = new Date();\n  if (currentTime >= expirationDate) {\n    return null;\n  } else {\n    return expirationDate.getTime() - currentTime.getTime();\n  }\n}\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,kBAAkB;AAE3C,OAAO,SAASC,YAAYA,CAAA,EAAG;EAC7B,MAAMC,KAAK,GAAGC,cAAc,CAACC,OAAO,CAAC,OAAO,CAAC;EAE7C,IAAI,CAACF,KAAK,EAAE;IACV,OAAO,IAAI;EACb;EAEA,MAAMG,aAAa,GAAGC,gBAAgB,CAAC,CAAC;EAExC,IAAID,aAAa,KAAK,IAAI,EAAE;IAC1B,OAAO,SAAS;EAClB;EAEA,OAAOH,KAAK;AACd;AAEA,OAAO,SAASK,WAAWA,CAAA,EAAG;EAC5B,MAAML,KAAK,GAAGD,YAAY,CAAC,CAAC;EAC5B,OAAO;IAAEC;EAAM,CAAC;AAClB;AAEA,OAAO,SAASM,eAAeA,CAAA,EAAG;EAChC,MAAMN,KAAK,GAAGD,YAAY,CAAC,CAAC;EAE5B,IAAI,CAACC,KAAK,IAAIA,KAAK,KAAK,SAAS,EAAE;IACjC,OAAOF,QAAQ,CAAC,OAAO,CAAC;EAC1B,CAAC,MAAM;IACL,OAAO,IAAI;EACb;AACF;AAEA,OAAO,SAASM,gBAAgBA,CAAA,EAAG;EACjC,MAAMG,oBAAoB,GAAGN,cAAc,CAACC,OAAO,CAAC,YAAY,CAAC;EACjE,MAAMM,cAAc,GAAG,IAAIC,IAAI,CAACF,oBAAoB,CAAC;EACrD,MAAMG,WAAW,GAAG,IAAID,IAAI,CAAC,CAAC;EAC9B,IAAIC,WAAW,IAAIF,cAAc,EAAE;IACjC,OAAO,IAAI;EACb,CAAC,MAAM;IACL,OAAOA,cAAc,CAACG,OAAO,CAAC,CAAC,GAAGD,WAAW,CAACC,OAAO,CAAC,CAAC;EACzD;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}